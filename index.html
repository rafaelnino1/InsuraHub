<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, user-scalable=no"/>
  <title>InsuraHub App</title>

  <!-- PWA meta -->
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="theme-color" content="#3498db">
  <link rel="apple-touch-icon" href="icons/icon-192.png">

  <!-- Iconos / fuentes -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --primary:#3498db;--primary-light:#5dade2;--primary-dark:#2c80b9;
      --background:#eef4ff;--card-bg:#fff;--text-dark:#1f2d3d;--text-light:#7f8c8d;
      --success:#2ecc71;--warning:#f39c12;--danger:#e74c3c;
      --depth-1:0 6px 14px rgba(0,0,0,.08),0 2px 4px rgba(0,0,0,.06);
      --depth-2:0 12px 28px rgba(0,0,0,.12),0 4px 10px rgba(0,0,0,.08);
      --depth-3:0 22px 50px rgba(0,0,0,.18),0 8px 16px rgba(0,0,0,.12);
      --ring-bg:#edf2f7;
      --sidebar-top: 0px; /* se ajusta con JS para que arranque a la altura de las pólizas */
    }
    *{margin:0;padding:0;box-sizing:border-box;font-family:Poppins,Segoe UI,Tahoma,Verdana,sans-serif}
    body{
      min-height:100vh;color:var(--text-dark);line-height:1.6;padding:20px;
      background:
        radial-gradient(1000px 500px at 10% 0%,rgba(93,173,226,.25),transparent 60%),
        radial-gradient(900px 500px at 100% 30%,rgba(46,204,113,.18),transparent 60%),
        linear-gradient(135deg,#e6f0ff 0%,#d6ecff 40%,#cfeef0 100%);
      display:flex; gap:16px;
    }

    /* ===== Sidebar (verde 3D, sin logo; recortado para empezar a la altura de las pólizas) ===== */
    .sidebar{
      width:280px; flex:0 0 280px;
      background:linear-gradient(180deg,#e8fff2 0%, #c9f7df 45%, #a6edc7 100%);
      border:1px solid rgba(32,140,90,.20);
      border-radius:16px; box-shadow:var(--depth-2);
      padding:14px; position:sticky; top:16px; height:calc(100dvh - 32px); overflow:auto;
      margin-top:var(--sidebar-top);
    }
    .side-title{font-weight:900;color:#0e7d4c;display:flex;align-items:center;gap:8px;margin-bottom:8px}

    /* Botones del sidebar con degradado azul */
    .side-btn{
      width:100%; display:flex; align-items:center; gap:10px; padding:12px; border-radius:12px;
      border:1px solid rgba(52,152,219,.25);
      background:linear-gradient(180deg,#6fb6e9 0%, #3a97dc 50%, #2c80b9 100%);
      color:#fff;
      box-shadow:0 8px 18px rgba(41,128,185,.25), inset 0 1px 0 rgba(255,255,255,.25);
      cursor:pointer; font-weight:800; margin-bottom:10px; transition:transform .2s, box-shadow .2s, filter .2s;
    }
    .side-btn:hover{transform:translateY(-2px); box-shadow:var(--depth-2); filter:saturate(1.05)}
    .side-badge{ margin-left:auto; padding:4px 10px; border-radius:999px; font-size:12px; font-weight:900; border:1px solid rgba(255,255,255,.4); background:rgba(255,255,255,.2); color:#fff }
    .ok{background:linear-gradient(180deg,#c8ffd6,#a9f7bf); color:#0d6b3a; border-color:rgba(46,204,113,.35)}
    .bad{background:linear-gradient(180deg,#ffd6d6,#ffc5c5); color:#8b1e1e; border-color:rgba(231,76,60,.35)}
    .hamburger{ display:none; position:fixed; left:12px; top:12px; z-index:10001; width:44px; height:44px; border-radius:12px; border:none; background:#fff; box-shadow:var(--depth-2); color:#2c80b9; font-size:20px; }

    /* Sidebar móvil */
    @media(max-width:1100px){
      body{padding-top:72px}
      .hamburger{display:block}
      .sidebar{position:fixed; left:12px; top:64px; height:calc(100dvh - 76px); z-index:10000; transition:transform .25s ease}
      .sidebar.hidden{transform:translateX(-110%);}
      .sidebar{margin-top:0} /* en móvil se superpone */
    }

    .container{max-width:1300px; margin:0 auto; flex:1 1 auto; display:flex; flex-direction:column}

    /* Header azul extendido */
    header{
      background:linear-gradient(135deg,var(--primary),var(--primary-dark));
      padding:28px 30px;border-radius:18px;margin-bottom:22px;box-shadow:var(--depth-3);
      display:flex;justify-content:space-between;align-items:center;color:#fff;position:relative;overflow:hidden
    }
    header::before{content:"";position:absolute;inset:-30% -20% auto auto;width:120%;height:220%;background:radial-gradient(closest-side,rgba(255,255,255,.18),transparent 60%);transform:rotate(25deg)}
    .app-title{display:flex;align-items:center;gap:16px;position:relative;z-index:1}
    .app-icon{width:72px;height:72px;border-radius:16px;background:rgba(255,255,255,.15);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:800;font-size:28px;backdrop-filter:blur(10px);box-shadow:var(--depth-2), inset 0 1px 0 rgba(255,255,255,.35);border:1px solid rgba(255,255,255,.35);overflow:hidden}
    .app-icon img{width:72px;height:72px;object-fit:contain;display:block}
    .app-title-text h1{font-size:26px;font-weight:800;margin-bottom:4px}
    .user-actions{display:flex;gap:10px;z-index:1}
    .btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:10px 18px;background:#fff;color:var(--primary);border:none;border-radius:12px;cursor:pointer;font-weight:700;transition:transform .2s,box-shadow .2s;text-decoration:none;box-shadow:var(--depth-1);min-height:40px}
    .btn:hover{transform:translateY(-2px);box-shadow:var(--depth-2)}
    .btn-outline{background:transparent;border:2px solid #fff;color:#fff;box-shadow:none}
    .btn-outline:hover{background:#fff;color:var(--primary)}
    .btn-success{background:linear-gradient(180deg,#35d07f,#2cb56f);color:#fff}
    .btn-warning{background:linear-gradient(180deg,#f6b449,#e99a10);color:#fff}
    .btn-danger{background:linear-gradient(180deg,#ef6b61,#e0443a);color:#fff}
    .btn-soft{background:linear-gradient(180deg,#f7fbff,#eef6ff);color:#2c3e50;border:1px solid rgba(52,152,219,.2)}

    /* Stats */
    .full-bleed{ margin-left: calc(-280px - 16px); width: calc(100% + 280px + 16px); }
    @media(max-width:1100px){ .full-bleed{ margin-left:0; width:100%; } }

    .stats-bar{display:flex;justify-content:space-around;background:var(--card-bg);border-radius:16px;padding:14px 16px;margin-bottom:18px;box-shadow:var(--depth-2);background:linear-gradient(180deg,#fff 0%,#f3f8ff 100%),radial-gradient(120% 80% at 20% 0%,rgba(93,173,226,.1),transparent 60%);border:1px solid rgba(52,152,219,.12)}
    .stat-item{text-align:center;padding:0 12px;position:relative}
    .stat-item:not(:last-child)::after{content:"";position:absolute;right:0;top:18%;height:64%;width:1px;background:linear-gradient(to bottom,transparent,rgba(52,152,219,.35),transparent)}
    .stat-value{font-size:28px;font-weight:900;margin-bottom:2px;background:linear-gradient(180deg,#2c80b9,#3498db);-webkit-background-clip:text;background-clip:text;color:transparent}
    .stat-label{color:var(--text-light);font-size:12px;font-weight:700;letter-spacing:.3px}

    /* Cards */
    .card-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:16px;margin-bottom:26px}
    .card{ background:var(--card-bg);border-radius:14px;padding:14px;box-shadow:var(--depth-2); transition:transform .2s,box-shadow .2s;display:flex;flex-direction:column;position:relative;overflow:hidden; border:1px solid rgba(52,152,219,.1); background-image:radial-gradient(800px 240px at -10% 0%,rgba(93,173,226,.12),transparent 40%),linear-gradient(180deg,#fff 0%,#f7f9ff 100%) }
    .card:hover{transform:translateY(-2px);box-shadow:var(--depth-3)}
    .card.status-good::after,.card.status-warning::after,.card.status-danger::after{content:"";position:absolute;left:0;top:0;bottom:0;width:5px}
    .card.status-good::after{background:linear-gradient(180deg,#41d98b,#2cb56f)}
    .card.status-warning::after{background:linear-gradient(180deg,#f7c052,#e99a10)}
    .card.status-danger::after{background:linear-gradient(180deg,#f07b72,#e0443a)}

    .card-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;padding-bottom:8px;border-bottom:1px solid rgba(52,152,219,.12)}
    .insurer-logo-header{width:48px;height:48px;border-radius:10px;background:#fff;display:flex;align-items:center;justify-content:center;border:1px solid rgba(52,152,219,.18);box-shadow:var(--depth-1);overflow:hidden;flex:0 0 48px}
    .insurer-logo-header img{width:100%;height:100%;object-fit:contain}
    .logo-placeholder{width:100%;height:100%;display:flex;align-items:center;justify-content:center;font-weight:800;font-size:12px;color:#95a5a6;background:#ecf0f1;border-radius:inherit}
    .header-right{display:flex;align-items:center;gap:10px}
    .insurance-type{display:inline-flex;align-items:center;gap:6px;padding:4px 8px;border-radius:999px;background:linear-gradient(180deg,rgba(52,152,219,.14),rgba(52,152,219,.06));border:1px solid rgba(52,152,219,.18);font-weight:800;font-size:14px;color:var(--primary-dark)}
    .insurance-icon{width:40px;height:40px;background:linear-gradient(180deg,var(--primary-light),var(--primary));border-radius:10px;display:flex;align-items:center;justify-content:center;color:#fff;box-shadow:0 6px 12px rgba(52,152,219,.3);border:1px solid rgba(255,255,255,.4)}
    .insurance-icon i{font-size:16px}

    .card-details{flex-grow:1}
    .detail-item{display:flex;justify-content:space-between;margin:8px 0}
    .detail-label{color:var(--text-light);font-size:13px}
    .detail-value{font-weight:700;color:var(--text-dark);font-size:14px}

    .contact-line{display:flex;align-items:center;justify-content:center;gap:6px;font-weight:700;color:#105b96;background:linear-gradient(180deg,#f7fbff,#eef6ff);border:1px solid rgba(52,152,219,.18);padding:6px 8px;border-radius:10px;margin:6px 0;box-shadow:var(--depth-1);line-height:1.2;font-size:12px}
    .contact-line i{font-size:12px;color:#2c80b9}
    .contact-line span:last-child{font-size:12px;font-weight:800}

    .ring-row{display:flex;align-items:center;gap:12px;margin-top:6px}
    .status-container{display:flex;flex-direction:column;align-items:center}
    .status-ring{position:relative;width:80px;height:80px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:900;font-size:14px;background:conic-gradient(var(--ring-color,var(--success)) 0 var(--progress,100%),var(--ring-bg) var(--progress,100%) 100%);box-shadow:0 12px 22px rgba(0,0,0,.18),0 6px 10px rgba(0,0,0,.1)}
    .status-ring::before{content:"";position:absolute;inset:-2px;border-radius:50%;background:radial-gradient(circle at 30% 30%,rgba(255,255,255,.85),rgba(255,255,255,.25) 40%,rgba(255,255,255,0) 60%),conic-gradient(from -90deg,rgba(255,255,255,.25),rgba(0,0,0,.08),rgba(255,255,255,.25))}
    .status-ring::after{content:"";position:absolute;inset:7px;border-radius:50%;background:radial-gradient(circle at 35% 30%,#fff,#f5f8ff 60%,#e9eef7)}
    .status-ring-inner{position:relative;z-index:2;width:60px;height:60px;border-radius:50%;display:flex;align-items:center;justify-content:center;color:#2c3e50;text-shadow:0 1px 0 rgba(255,255,255,.7)}
    .days-text{font-size:11px;text-align:center;margin-top:6px;color:var(--text-light);font-weight:700}
    .status-ring-good{--ring-color:var(--success)}.status-ring-warning{--ring-color:var(--warning)}.status-ring-danger{--ring-color:var(--danger)}
    .ring-actions{display:flex;flex-direction:column;gap:8px;min-width:160px}
    .ring-actions .btn{width:100%;min-height:38px;padding:8px 12px}

    /* Footer */
    footer{ text-align:center;margin-top:16px;padding:10px 14px;color:#fff; background:linear-gradient(135deg,var(--primary),var(--primary-dark)); border-radius:12px;box-shadow:0 8px 18px rgba(52,152,219,.25) }
    footer p{font-size:12px;font-weight:600}

    /* Modales base */
    .modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,.45);z-index:9999;justify-content:center;align-items:center;backdrop-filter:blur(6px)}
    .modal-content{background:linear-gradient(180deg,rgba(255,255,255,.92),rgba(255,255,255,.98));border-radius:18px;width:96%;max-width:1400px;padding:28px;box-shadow:var(--depth-3);max-height:90vh;overflow:auto;position:relative;border:1px solid rgba(52,152,219,.15)}
    .modal-header{text-align:center;margin-bottom:14px;position:relative}
    .close-modal{position:absolute;top:-10px;right:-10px;width:34px;height:34px;background:var(--danger);color:#fff;border:none;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center}

    /* Formularios */
    .form-grid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:12px}
    @media (max-width:720px){.form-grid{grid-template-columns:1fr}}
    .form-group{display:flex;flex-direction:column;gap:6px}
    .form-label{font-weight:800;color:#1f2d3d;font-size:14px;display:flex;align-items:center;gap:8px}
    .hint{font-size:12px;color:#567;font-weight:600}
    .input-wrap{display:flex;align-items:center;gap:10px;padding:12px 14px;border-radius:12px;background:linear-gradient(180deg,#ffffff,#f7faff);border:1px solid rgba(52,152,219,.18);box-shadow:var(--depth-1)}
    .input-wrap i{color:#2c80b9}
    .input-wrap input,.input-wrap select,.input-wrap textarea{width:100%;border:none;outline:none;background:transparent;font-size:15px;color:#1f2d3d}
    .input-wrap textarea{min-height:120px;resize:vertical}
    .section-card{background:linear-gradient(180deg,#ffffff,#f6f8ff);border:1px solid rgba(52,152,219,.15);border-radius:16px;padding:16px;box-shadow:var(--depth-1);margin-bottom:14px}
    .section-title{font-weight:900;color:#155a8f;margin-bottom:8px;display:flex;align-items:center;gap:8px}

    /* Renovación */
    .renewal-layout{display:grid;grid-template-columns:1fr 1.25fr;gap:20px}
    @media(max-width:1180px){.renewal-layout{grid-template-columns:1fr}}
    .renewal-col{background:linear-gradient(180deg,#fff,#f9fbff);border:1px solid rgba(52,152,219,.12);border-radius:14px;box-shadow:var(--depth-1);padding:16px}
    .insurer-option{display:grid;grid-template-columns:48px 1fr auto;gap:12px;align-items:center;padding:12px;border:2px solid #ecf0f1;border-radius:12px;margin-bottom:10px;cursor:pointer;transition:transform .25s,border-color .25s,background-color .25s;background:#fff;box-shadow:var(--depth-1)}
    .insurer-option:hover{border-color:var(--primary);transform:translateX(6px)}
    .insurer-option.selected{border-color:var(--primary);background:rgba(52,152,219,.06)}
    .insurer-logo-small{width:44px;height:44px;display:flex;align-items:center;justify-content:center;border-radius:10px;background:#fff;border:1px solid rgba(52,152,219,.18);overflow:hidden}
    .insurer-logo-small img{width:100%;height:100%;object-fit:contain}
    .insurer-price{font-weight:900;color:var(--primary-dark);text-align:right;min-width:130px}
    @keyframes blink-green{0%,100%{box-shadow:0 0 0 2px rgba(46,204,113,.9),0 0 12px rgba(46,204,113,.35)}50%{box-shadow:0 0 0 2px rgba(46,204,113,.3),0 0 2px rgba(46,204,113,.1)}}
    .insurer-option.cheapest{border-color:#2ecc71!important;animation:blink-green 1.2s infinite}
    .compare-title{font-weight:800;color:#1f2d3d;margin-bottom:8px;display:flex;align-items:center;gap:8px}
    .compare-table{width:100%;border-collapse:separate;border-spacing:0;overflow:hidden;border-radius:12px;box-shadow:var(--depth-1)}
    .compare-table thead th{background:linear-gradient(180deg,#eef6ff,#e8f1ff);color:#1f2d3d;text-align:left;font-weight:800;padding:12px;border-bottom:1px solid rgba(52,152,219,.15)}
    .compare-table tbody td{background:#fff;padding:12px;border-bottom:1px solid #f0f3f7}
    .compare-table img{width:28px;height:28px;object-fit:contain}
    .pill{display:inline-block;padding:4px 10px;border-radius:999px;font-weight:700;font-size:12px;background:linear-gradient(180deg,#f7fbff,#eef6ff);border:1px solid rgba(52,152,219,.2);color:#2c3e50}
    .btn-mini{padding:8px 12px;border-radius:10px;font-weight:700;border:1px solid rgba(52,152,219,.2);background:#fff;box-shadow:var(--depth-1);cursor:pointer}
    .selected-row{box-shadow:inset 0 0 0 2px rgba(52,152,219,.35)}

    /* Pago */
    .pay-tabs{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:12px}
    .pay-tab{padding:10px 14px;border-radius:10px;border:1px solid rgba(52,152,219,.2);background:#fff;box-shadow:var(--depth-1);cursor:pointer;font-weight:700;display:flex;align-items:center;gap:8px}
    .pay-tab.active{background:linear-gradient(180deg,#f1f9ff,#e7f2ff);border-color:rgba(52,152,219,.45)}
    .inline-2{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    @media(max-width:560px){.inline-2{grid-template-columns:1fr}}

    /* Success */
    #successModal .success-card{background:linear-gradient(180deg,#fff,#f6fffb);padding:30px;border-radius:18px;box-shadow:var(--depth-3);text-align:center;width:min(520px,92vw);border:1px solid rgba(46,204,113,.2)}
    .checkmark{width:100px;height:100px;border-radius:50%;margin:0 auto 16px;position:relative;background:radial-gradient(circle at 30% 30%,#8ef0be,#2ecc71);box-shadow:inset 0 8px 14px rgba(255,255,255,.6),inset 0 -8px 12px rgba(0,0,0,.08),0 12px 22px rgba(46,204,113,.35)}
    .checkmark svg{position:absolute;inset:0;margin:auto;width:64px;height:64px;filter:drop-shadow(0 2px 2px rgba(0,0,0,.15))}
    .checkmark .path{stroke:#fff;stroke-width:8;stroke-linecap:round;stroke-linejoin:round;fill:none;stroke-dasharray:100;stroke-dashoffset:100;animation:draw .7s .2s ease forwards}
    @keyframes draw{to{stroke-dashoffset:0}}
    @keyframes popScale{0%{transform:scale(.8);opacity:0}100%{transform:scale(1);opacity:1}}
    .checkmark{animation:popScale .5s ease-out both}

    /* Móvil */
    @media(max-width:768px){
      .stats-bar{flex-direction:column;gap:14px}
      .stat-item:not(:last-child)::after{display:none}
      header{flex-direction:column;gap:12px;text-align:center}
      .user-actions{justify-content:center}
      .ring-row{align-items:stretch}
    }
  </style>
</head>
<body>
  <!-- Toggle sidebar (móvil) -->
  <button class="hamburger" id="toggleSidebar" aria-label="Menú"><i class="fas fa-bars"></i></button>

  <!-- ===== Sidebar (sin logo) ===== -->
  <aside class="sidebar" id="sidebar">
    <div class="side-title"><i class="fas fa-layer-group"></i> Ecosistema InsuraHub</div>

    <button class="side-btn" id="openSARLAFT">
      <i class="fas fa-clipboard-check"></i> Tu formulario SARLAFT al día
      <span class="side-badge bad" id="sarlaftBadge">Pendiente</span>
    </button>

    <button class="side-btn" id="openBulkPolicies">
      <i class="fas fa-bolt"></i> Cargar pólizas automáticamente
      <span class="side-badge">Importar</span>
    </button>

    <button class="side-btn" id="openPoliciesVault">
      <i class="fas fa-folder-open"></i> Tus pólizas
    </button>

    <button class="side-btn" id="openDataUpdate">
      <i class="fas fa-rotate"></i> Actualización de datos
    </button>
  </aside>

  <div class="container">
    <!-- Header azul extendido -->
    <header class="full-bleed">
      <div class="app-title">
        <div class="app-icon"><img src="logos/insurahublogo.png" alt="InsuraHub" onerror="this.remove();this.parentNode.textContent='IH'"></div>
        <div class="app-title-text"><h1>InsuraHub</h1><p>Gestión Inteligente de Seguros</p></div>
      </div>
      <div class="user-actions">
        <!-- Botón "Nueva Póliza" eliminado a petición -->
        <button class="btn btn-outline" id="loginBtn"><i class="fas fa-user"></i> Iniciar Sesión</button>
      </div>
    </header>

    <!-- Stats -->
    <div class="stats-bar full-bleed">
      <div class="stat-item"><div class="stat-value" id="totalPolicies">6</div><div class="stat-label">Pólizas Activas</div></div>
      <div class="stat-item"><div class="stat-value" id="expiringPolicies">2</div><div class="stat-label">Por Vencer (&lt;30 días)</div></div>
      <div class="stat-item"><div class="stat-value" id="totalCoverage">$985.000.000</div><div class="stat-label">Cobertura Total</div></div>
    </div>

    <!-- Grid pólizas -->
    <div class="card-grid" id="policyGrid"></div>

    <!-- Footer -->
    <footer>
      <p>© 2025 InsuraHub - Todos tus seguros en un solo lugar</p>
    </footer>
  </div>

  <!-- ===== Modales ===== -->
  <!-- Login -->
  <div class="modal" id="loginModal" aria-hidden="true">
    <div class="modal-content" role="dialog" aria-modal="true">
      <div class="modal-header">
        <h2>Iniciar Sesión</h2>
        <p>Accede a tu cuenta para gestionar tus seguros</p>
        <button class="close-modal" id="closeLoginModal">×</button>
      </div>
      <div class="social-login">
        <button type="button" class="btn-social btn-google" id="loginGoogle"><i class="fab fa-google"></i> Continuar con Google</button>
        <button type="button" class="btn-social btn-facebook" id="loginFacebook"><i class="fab fa-facebook-f"></i> Continuar con Facebook</button>
        <button type="button" class="btn-social btn-apple" id="loginApple"><i class="fab fa-apple"></i> Continuar con Apple</button>
      </div>
      <div style="text-align:center;color:#99a3ad;font-weight:700;margin:8px 0 14px">o con tu correo</div>
      <form>
        <div class="form-group"><label class="form-label" for="email"><i class="fas fa-envelope"></i> Correo Electrónico</label><div class="input-wrap"><input type="email" id="email" required placeholder="tucorreo@dominio.com"></div></div>
        <div class="form-group"><label class="form-label" for="password"><i class="fas fa-lock"></i> Contraseña</label><div class="input-wrap"><input type="password" id="password" required placeholder="••••••••"></div></div>
        <button type="submit" class="btn" style="width:100%"><i class="fas fa-right-to-bracket"></i> Iniciar Sesión</button>
      </form>
    </div>
  </div>

  <!-- Renovación -->
  <div class="modal" id="renewalModal" aria-hidden="true">
    <div class="modal-content" role="dialog" aria-modal="true">
      <div class="modal-header">
        <h2>Renovar Póliza</h2>
        <p>Selecciona una aseguradora y compara en tiempo real</p>
        <button class="close-modal" id="closeRenewalModal">×</button>
      </div>
      <div class="renewal-layout">
        <div class="renewal-col">
          <h3>Póliza a renovar</h3>
          <div class="detail-value" id="renewalPolicyNumber" style="margin-bottom:8px">#AUTO-123456</div>

          <h3>Selecciona una aseguradora</h3>
          <div class="renewal-options" id="renewalOptions"></div>

          <button type="button" class="btn" style="width:100%;margin-top:12px" id="confirmRenewal">
            <i class="fas fa-check-circle"></i> Confirmar Renovación
          </button>
          <div class="pay-help" id="payHint" style="display:none;margin-top:8px">
            <i class="fas fa-credit-card"></i> Forma de pago seleccionada: <strong id="payMethodLabel">—</strong>
          </div>
        </div>

        <div class="renewal-col">
          <div class="compare-title"><i class="fas fa-scale-balanced"></i> Comparación rápida</div>
          <div id="currentPolicyChip" style="margin-bottom:8px"></div>
          <div class="table-responsive">
            <table class="compare-table" id="compareTable">
              <thead>
                <tr><th>Aseguradora</th><th>Precio</th><th>Cobertura</th><th>Deducible</th><th>Extras</th><th>Detalle</th></tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Condiciones / visor genérico -->
  <div class="modal" id="conditionsModal" aria-hidden="true">
    <div class="modal-content" role="dialog" aria-modal="true">
      <div class="modal-header">
        <h2 id="conditionsTitle">Condiciones</h2>
        <p id="conditionsSubtitle" style="color:#567;font-weight:600"></p>
        <button class="close-modal" id="closeConditionsModal">×</button>
      </div>
      <div class="conditions-text" id="conditionsBody" style="white-space:pre-wrap;background:#fff;border:1px solid rgba(52,152,219,.15);border-radius:12px;padding:14px;box-shadow:var(--depth-1)"></div>
    </div>
  </div>

  <!-- Pago -->
  <div class="modal" id="paymentModal" aria-hidden="true">
    <div class="modal-content" role="dialog" aria-modal="true">
      <div class="modal-header">
        <h2>Formas de Pago</h2>
        <p id="paymentSubtitle" style="color:#567;font-weight:600">Selecciona y completa los datos</p>
        <button class="close-modal" id="closePaymentModal">×</button>
      </div>

      <div class="pay-tabs" id="payTabs">
        <button class="pay-tab active" data-method="tarjeta"><i class="fas fa-credit-card"></i> Tarjeta</button>
        <button class="pay-tab" data-method="pse"><i class="fas fa-building-columns"></i> PSE</button>
        <button class="pay-tab" data-method="transferencia"><i class="fas fa-money-bill-transfer"></i> Transferencia</button>
        <button class="pay-tab" data-method="efectivo"><i class="fas fa-coins"></i> Efectivo</button>
      </div>

      <div id="payForms">
        <div class="pay-form" data-method="tarjeta">
          <div class="form-group"><label class="form-label">Nombre en la tarjeta</label><div class="input-wrap"><i class="fas fa-user"></i><input type="text" id="cardName" placeholder="Como aparece en la tarjeta"></div></div>
          <div class="form-group"><label class="form-label">Número de tarjeta</label><div class="input-wrap"><i class="fas fa-credit-card"></i><input type="text" id="cardNumber" placeholder="#### #### #### ####" inputmode="numeric" maxlength="19"></div></div>
          <div class="inline-2">
            <div class="form-group"><label class="form-label">Vencimiento (MM/AA)</label><div class="input-wrap"><i class="fas fa-calendar"></i><input type="text" id="cardExp" placeholder="MM/AA" maxlength="5"></div></div>
            <div class="form-group"><label class="form-label">CVV</label><div class="input-wrap"><i class="fas fa-key"></i><input type="password" id="cardCVV" placeholder="***" maxlength="4"></div></div>
          </div>
        </div>

        <div class="pay-form" data-method="pse" style="display:none">
          <div class="form-group"><label class="form-label">Banco</label>
            <div class="input-wrap"><i class="fas fa-building-columns"></i>
              <select id="pseBank"><option value="">Selecciona tu banco</option><option>Bancolombia</option><option>Davivienda</option><option>Banco de Bogotá</option><option>BBVA</option><option>Nequi</option></select>
            </div>
          </div>
          <div class="form-group"><label class="form-label">Correo del titular</label><div class="input-wrap"><i class="fas fa-envelope"></i><input type="email" id="pseEmail" placeholder="tucorreo@dominio.com"></div></div>
        </div>

        <div class="pay-form" data-method="transferencia" style="display:none">
          <div class="conditions-text" style="margin-bottom:10px">
            Transferir a:<br>
            - Banco: Bancolombia (AHORROS)<br>
            - No. Cuenta: 123-456789-01<br>
            - Titular: InsuraHub S.A.S<br>
            - NIT: 900.123.456-7
          </div>
          <div class="form-group"><label class="form-label">Adjunta comprobante (opcional)</label><div class="input-wrap"><i class="fas fa-paperclip"></i><input type="file" id="trfReceipt" accept="image/*,application/pdf"></div></div>
        </div>

        <div class="pay-form" data-method="efectivo" style="display:none">
          <div class="conditions-text">Paga en puntos aliados (Efecty/Baloto). Recibirás un código al confirmar la renovación.</div>
        </div>
      </div>

      <button class="btn" id="savePayment" style="width:100%;margin-top:10px"><i class="fas fa-floppy-disk"></i> Guardar forma de pago</button>
    </div>
  </div>

  <!-- Success -->
  <div class="modal" id="successModal" aria-hidden="true" style="z-index:10000">
    <div class="success-card" role="alert" aria-live="polite">
      <div class="checkmark"><svg viewBox="0 0 64 64"><path class="path" d="M16 34 L28 46 L50 22"></path></svg></div>
      <div id="successMessage">¡Operación exitosa!</div>
      <div id="successSub"></div>
    </div>
  </div>

  <!-- SARLAFT -->
  <div class="modal" id="sarlaftModal" aria-hidden="true">
    <div class="modal-content" role="dialog" aria-modal="true">
      <div class="modal-header">
        <h2>Formulario SARLAFT</h2>
        <p style="color:#567;font-weight:600">Completa todos los campos para quedar “al día”.</p>
        <button class="close-modal" id="closeSarlaftModal">×</button>
      </div>

      <form id="sarlaftForm">
        <!-- Identificación -->
        <div class="section-card">
          <div class="section-title"><i class="fas fa-user-shield"></i> Identificación</div>
          <div class="form-grid">
            <div class="form-group">
              <label class="form-label"><i class="fas fa-id-card"></i> Tipo de persona</label>
              <div class="input-wrap">
                <select name="tipoPersona" required>
                  <option value="">Selecciona</option>
                  <option>Natural</option>
                  <option>Jurídica</option>
                </select>
              </div>
            </div>
            <div class="form-group">
              <label class="form-label"><i class="fas fa-globe"></i> País de residencia</label>
              <div class="input-wrap">
                <select name="pais" required>
                  <option value="">Selecciona</option>
                  <option>Colombia</option><option>Estados Unidos</option><option>México</option>
                  <option>Chile</option><option>Perú</option><option>España</option><option>Otro</option>
                </select>
              </div>
            </div>
            <div class="form-group">
              <label class="form-label"><i class="fas fa-city"></i> Ciudad</label>
              <div class="input-wrap"><input name="ciudad" placeholder="Ej: Bogotá" required></div>
            </div>
            <div class="form-group">
              <label class="form-label"><i class="fas fa-briefcase"></i> Ocupación / Actividad</label>
              <div class="input-wrap">
                <select name="ocupacion" required>
                  <option value="">Selecciona</option>
                  <option>Empleado</option><option>Independiente</option><option>Empresario</option>
                  <option>Estudiante</option><option>Pensionado</option><option>Otro</option>
                </select>
              </div>
            </div>
          </div>
        </div>

        <!-- Origen de fondos -->
        <div class="section-card">
          <div class="section-title"><i class="fas fa-sack-dollar"></i> Origen y destino de fondos</div>
          <div class="form-grid">
            <div class="form-group">
              <label class="form-label"><i class="fas fa-piggy-bank"></i> Origen principal de ingresos</label>
              <div class="input-wrap">
                <select name="origenIngresos" required>
                  <option value="">Selecciona</option>
                  <option>Salario</option><option>Honorarios</option><option>Rentas</option>
                  <option>Negocio propio</option><option>Inversiones</option><option>Otros</option>
                </select>
              </div>
              <div class="hint">Selecciona el origen predominante</div>
            </div>
            <div class="form-group">
              <label class="form-label"><i class="fas fa-route"></i> Destino habitual de fondos</label>
              <div class="input-wrap">
                <select name="destinoFondos" required>
                  <option value="">Selecciona</option>
                  <option>Gastos personales</option><option>Pago de deudas</option>
                  <option>Ahorro/Inversión</option><option>Negocio</option>
                </select>
              </div>
            </div>
            <div class="form-group">
              <label class="form-label"><i class="fas fa-coins"></i> Ingresos mensuales (rango)</label>
              <div class="input-wrap">
                <select name="ingresos" required>
                  <option value="">Selecciona</option>
                  <option>&lt; $2.000.000</option><option>$2M – $5M</option><option>$5M – $10M</option>
                  <option>$10M – $20M</option><option>&gt; $20M</option>
                </select>
              </div>
            </div>
            <div class="form-group">
              <label class="form-label"><i class="fas fa-receipt"></i> Egresos mensuales (rango)</label>
              <div class="input-wrap">
                <select name="egresos" required>
                  <option value="">Selecciona</option>
                  <option>&lt; $1.000.000</option><option>$1M – $3M</option><option>$3M – $6M</option>
                  <option>$6M – $12M</option><option>&gt; $12M</option>
                </select>
              </div>
            </div>
          </div>
        </div>

        <!-- Cumplimiento -->
        <div class="section-card">
          <div class="section-title"><i class="fas fa-user-lock"></i> Declaraciones y cumplimiento</div>
          <div class="form-grid">
            <div class="form-group">
              <label class="form-label"><i class="fas fa-scale-balanced"></i> ¿Es usted PEP (o familiar/relacionado)?</label>
              <div class="input-wrap"><select name="pep" required><option value="">Selecciona</option><option>No</option><option>Sí</option></select></div>
            </div>
            <div class="form-group">
              <label class="form-label"><i class="fas fa-flag-usa"></i> ¿Sujeto a FATCA/CRS (residencia fiscal exterior)?</label>
              <div class="input-wrap"><select name="fatca" required><option value="">Selecciona</option><option>No</option><option>Sí</option></select></div>
            </div>
            <div class="form-group">
              <label class="form-label"><i class="fas fa-bitcoin-sign"></i> ¿Opera con criptoactivos?</label>
              <div class="input-wrap"><select name="cripto" required><option value="">Selecciona</option><option>No</option><option>Sí</option></select></div>
            </div>
            <div class="form-group">
              <label class="form-label"><i class="fas fa-book"></i> ¿Declara renta en Colombia?</label>
              <div class="input-wrap"><select name="renta" required><option value="">Selecciona</option><option>Sí</option><option>No</option></select></div>
            </div>
            <div class="form-group">
              <label class="form-label"><i class="fas fa-list-check"></i> Listas restrictivas/Sanciones</label>
              <div class="input-wrap"><select name="listas" required><option value="">Selecciona</option><option>Ninguna</option><option>Observado</option><option>En revisión</option></select></div>
            </div>
            <div class="form-group">
              <label class="form-label"><i class="fas fa-people-arrows"></i> ¿Tiene beneficiarios/terceros?</label>
              <div class="input-wrap"><select name="beneficiarios" required><option value="">Selecciona</option><option>No</option><option>Sí</option></select></div>
            </div>
            <div class="form-group" style="grid-column:1/-1">
              <label class="form-label"><i class="fas fa-clipboard"></i> Observaciones (opcional)</label>
              <div class="input-wrap"><textarea name="observaciones" placeholder="Comentarios adicionales..."></textarea></div>
            </div>
          </div>
        </div>

        <button type="submit" class="btn" style="width:100%"><i class="fas fa-circle-check"></i> Guardar SARLAFT</button>
      </form>
    </div>
  </div>

  <!-- Carga Masiva / Documentos -->
  <div class="modal" id="bulkPoliciesModal" aria-hidden="true">
    <div class="modal-content" role="dialog" aria-modal="true">
      <div class="modal-header">
        <h2>Cargar pólizas</h2>
        <p style="color:#567;font-weight:600">Sube tus <strong>archivos de póliza (PDF/imagen)</strong>. Importar por CSV es opcional.</p>
        <button class="close-modal" id="closeBulkPolicies">×</button>
      </div>

      <div class="section-card">
        <div class="section-title"><i class="fas fa-file-arrow-up"></i> Subir documentos de póliza (PDF/imagen)</div>
        <p style="margin-bottom:8px;color:#567;font-weight:600">Lo que subas aquí aparecerá en <strong>Tus pólizas</strong>. Acepta: PDF, JPG, JPEG, PNG, WEBP, HEIC, TIF/TIFF, DOC, DOCX.</p>
        <div id="docDrop" style="padding:18px;border:2px dashed rgba(52,152,219,.35);border-radius:12px;text-align:center;background:#f8fbff">
          Arrastra y suelta tus archivos o haz clic
          <input type="file" id="docFiles" accept=".pdf,.jpg,.jpeg,.png,.webp,.heic,.tif,.tiff,.doc,.docx" multiple style="display:none">
        </div>
        <div id="docsResult" style="margin-top:10px;color:#155a8f;font-weight:700"></div>
      </div>

      <div class="section-card">
        <div class="section-title"><i class="fas fa-file-csv"></i> Importar pólizas por CSV (opcional)</div>
        <p style="margin-bottom:10px">Columnas requeridas: <strong>policyNumber,type,insurer,insuredId,insuredName,coverage,expirationDate</strong> — opcional: <strong>conditions</strong></p>
        <button class="btn" id="downloadTemplate"><i class="fas fa-download"></i> Descargar plantilla CSV</button>
      </div>

      <div class="section-card">
        <div class="section-title"><i class="fas fa-upload"></i> Subir archivo CSV</div>
        <div id="dropZone" style="padding:18px;border:2px dashed rgba(52,152,219,.35);border-radius:12px;text-align:center;background:#f8fbff">
          Arrastra y suelta tu archivo CSV aquí (o haz clic)
          <input type="file" id="csvFile" accept=".csv" style="display:none">
        </div>
        <div id="bulkResult" style="margin-top:10px;color:#155a8f;font-weight:700"></div>
      </div>
    </div>
  </div>

  <script>
    /* ===== Datos ===== */
    const insurerLogos={allianz:"logos/allianz.png",axa:"logos/axa.png",generali:"logos/generali.png",cigna:"logos/cigna.png",zurich:"logos/zurich.png",liberty:"logos/liberty.png"};
    const insurerNames={allianz:"Allianz",axa:"AXA",generali:"Generali",cigna:"Cigna",zurich:"Zurich",liberty:"Liberty Mutual"};
    const insurerPhones={allianz:"+57 01 8000 510 510",axa:"+57 01 8000 123 456",generali:"+57 01 8000 345 678",cigna:"+57 01 8000 765 432",zurich:"+57 01 8000 111 222",liberty:"+57 01 8000 999 888"};
    const renewalPrices={allianz:850000,axa:920000,generali:780000,cigna:950000,zurich:890000,liberty:810000};
    const coverageAmounts={allianz:200000000,axa:220000000,generali:180000000,cigna:240000000,zurich:210000000,liberty:190000000};
    const offerConditions={
      allianz:{deductible:"10% o $2.000.000",extras:"Asistencia 24/7 + carro sustituto",details:"- Cobertura daños y pérdida total.\n- Deducible: 10% o $2.000.000.\n- Asistencia vial 24/7, grúa, cerrajería.\n- Carro sustituto 5 días por siniestro.\n- Exclusiones: embriaguez, uso competitivo."},
      axa:{deductible:"8% o $1.800.000",extras:"Vidrios sin deducible",details:"- Cobertura ampliada + RC.\n- Deducible: 8% o $1.800.000.\n- Reposición de vidrios sin deducible.\n- Asistencia jurídica.\n- Exclusiones: dolo, carreras."},
      generali:{deductible:"12% o $2.200.000",extras:"Revisión anual preventiva",details:"- Cobertura estándar integral.\n- Deducible: 12% o $2.200.000.\n- Revisión mecánica preventiva anual.\n- Cobertura a accesorios declarados.\n- Exclusiones: accesorios no declarados."},
      cigna:{deductible:"10% o $2.500.000",extras:"Cobertura médica ampliada",details:"- Enfoque salud/viaje.\n- Deducible: 10% o $2.500.000.\n- Gastos médicos ampliado
