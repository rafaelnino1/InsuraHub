<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, user-scalable=no"/>
  <title>InsuraHub App</title>

  <!-- PWA meta -->
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="theme-color" content="#3498db">
  <link rel="apple-touch-icon" href="icons/icon-192.png">

  <!-- Iconos / fuentes -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --primary:#3498db;--primary-light:#5dade2;--primary-dark:#2c80b9;
      --background:#eef4ff;--card-bg:#fff;--text-dark:#1f2d3d;--text-light:#7f8c8d;
      --success:#2ecc71;--warning:#f39c12;--danger:#e74c3c;
      --depth-1:0 6px 14px rgba(0,0,0,.08),0 2px 4px rgba(0,0,0,.06);
      --depth-2:0 12px 28px rgba(0,0,0,.12),0 4px 10px rgba(0,0,0,.08);
      --depth-3:0 22px 50px rgba(0,0,0,.18),0 8px 16px rgba(0,0,0,.12);
      --ring-bg:#edf2f7;
      --sidebar:#0f3d66; --sidebar-2:#155a8f;
      --sidebar-w: 270px;
    }
    *{margin:0;padding:0;box-sizing:border-box;font-family:Poppins,Segoe UI,Tahoma,Verdana,sans-serif}
    body{
      min-height:100vh;color:var(--text-dark);line-height:1.6;
      background:
        radial-gradient(1000px 500px at 10% 0%,rgba(93,173,226,.25),transparent 60%),
        radial-gradient(900px 500px at 100% 30%,rgba(46,204,113,.18),transparent 60%),
        linear-gradient(135deg,#e6f0ff 0%,#d6ecff 40%,#cfeef0 100%)
    }

    /* ====== LAYOUT con SIDEBAR ====== */
    .app{
      display:flex; min-height:100svh;
    }
    .sidebar{
      position:sticky; top:0; height:100svh; width:var(--sidebar-w);
      background: linear-gradient(180deg, var(--sidebar), var(--sidebar-2));
      box-shadow: var(--depth-3);
      color:#eaf4ff; padding:16px 14px; z-index: 999;
    }
    .sb-header{display:flex; align-items:center; gap:10px; margin-bottom:14px}
    .sb-logo{
      width:42px;height:42px;border-radius:10px;background:rgba(255,255,255,.12);
      display:flex;align-items:center;justify-content:center;overflow:hidden;border:1px solid rgba(255,255,255,.25)
    }
    .sb-logo img{width:100%;height:100%;object-fit:contain}
    .sb-title{font-weight:900; letter-spacing:.2px}
    .sb-group{margin-top:8px}
    .sb-item{
      display:flex;align-items:center;gap:10px; padding:12px; border-radius:12px; cursor:pointer;
      background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.02));
      border:1px solid rgba(255,255,255,.15); color:#eaf4ff; font-weight:700; margin-bottom:10px;
      transition: transform .2s, box-shadow .2s;
    }
    .sb-item:hover{transform:translateY(-2px); box-shadow: var(--depth-2)}
    .sb-item i{width:20px; text-align:center}
    .sb-status{
      margin-left:auto; padding:4px 8px; border-radius:999px; font-size:11px; font-weight:800;
      border:1px solid rgba(255,255,255,.25); background:rgba(255,255,255,.12)
    }
    .sb-status.ok{background:linear-gradient(180deg,#35d07f,#2cb56f); border-color:rgba(0,0,0,.08)}
    .sb-status.bad{background:linear-gradient(180deg,#ef6b61,#e0443a); border-color:rgba(0,0,0,.08)}

    /* Toggle mobile */
    .sb-toggle{
      display:none; position:fixed; left:12px; top:12px; z-index:1000;
      background:#fff;color:var(--primary); border:none; border-radius:10px; padding:10px 12px; box-shadow: var(--depth-2);
    }
    @media (max-width:1024px){
      .sidebar{
        position:fixed; left:-100%; top:0; transition: left .25s ease;
      }
      .sidebar.open{left:0}
      .sb-toggle{display:inline-flex; align-items:center; gap:8px}
      .content{margin-left:0 !important; padding-top:56px}
    }

    .content{
      flex:1; padding:20px; margin-left: var(--sidebar-w);
    }

    /* ====== Header / resto ====== */
    header{
      background:linear-gradient(135deg,var(--primary),var(--primary-dark));
      padding:22px 30px;border-radius:18px;margin-bottom:22px;box-shadow:var(--depth-3);
      display:flex;justify-content:space-between;align-items:center;color:#fff;position:relative;overflow:hidden
    }
    header::before{content:"";position:absolute;inset:-30% -20% auto auto;width:120%;height:220%;background:radial-gradient(closest-side,rgba(255,255,255,.18),transparent 60%);transform:rotate(25deg)}
    .app-title{display:flex;align-items:center;gap:16px;position:relative;z-index:1}
    .app-icon{width:72px;height:72px;border-radius:16px;background:rgba(255,255,255,.15);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:800;font-size:28px;backdrop-filter:blur(10px);box-shadow:var(--depth-2), inset 0 1px 0 rgba(255,255,255,.35);border:1px solid rgba(255,255,255,.35);overflow:hidden}
    .app-icon img{width:72px;height:72px;object-fit:contain;display:block}
    .app-title-text h1{font-size:26px;font-weight:800;margin-bottom:4px}
    .user-actions{display:flex;gap:10px;z-index:1}
    .btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:10px 18px;background:#fff;color:var(--primary);border:none;border-radius:12px;cursor:pointer;font-weight:700;transition:transform .2s,box-shadow .2s;text-decoration:none;box-shadow:var(--depth-1);min-height:40px}
    .btn:hover{transform:translateY(-2px);box-shadow:var(--depth-2)}
    .btn-outline{background:transparent;border:2px solid #fff;color:#fff;box-shadow:none}
    .btn-outline:hover{background:#fff;color:var(--primary)}
    .btn-success{background:linear-gradient(180deg,#35d07f,#2cb56f);color:#fff}
    .btn-warning{background:linear-gradient(180deg,#f6b449,#e99a10);color:#fff}
    .btn-danger{background:linear-gradient(180deg,#ef6b61,#e0443a);color:#fff}
    .btn-soft{background:linear-gradient(180deg,#f7fbff,#eef6ff);color:#2c3e50;border:1px solid rgba(52,152,219,.2)}

    /* Stats */
    .stats-bar{display:flex;justify-content:space-around;background:var(--card-bg);border-radius:16px;padding:14px 16px;margin-bottom:18px;box-shadow:var(--depth-2);background:linear-gradient(180deg,#fff 0%,#f3f8ff 100%),radial-gradient(120% 80% at 20% 0%,rgba(93,173,226,.1),transparent 60%);border:1px solid rgba(52,152,219,.12)}
    .stat-item{text-align:center;padding:0 12px;position:relative}
    .stat-item:not(:last-child)::after{content:"";position:absolute;right:0;top:18%;height:64%;width:1px;background:linear-gradient(to bottom,transparent,rgba(52,152,219,.35),transparent)}
    .stat-value{font-size:28px;font-weight:900;margin-bottom:2px;background:linear-gradient(180deg,#2c80b9,#3498db);-webkit-background-clip:text;background-clip:text;color:transparent}
    .stat-label{color:var(--text-light);font-size:12px;font-weight:700;letter-spacing:.3px}

    /* Cards */
    .card-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:16px;margin-bottom:26px}
    .card{
      background:var(--card-bg);border-radius:14px;padding:14px;box-shadow:var(--depth-2);
      transition:transform .2s,box-shadow .2s;display:flex;flex-direction:column;position:relative;overflow:hidden;
      border:1px solid rgba(52,152,219,.1);
      background-image:radial-gradient(800px 240px at -10% 0%,rgba(93,173,226,.12),transparent 40%),linear-gradient(180deg,#fff 0%,#f7f9ff 100%)
    }
    .card:hover{transform:translateY(-2px);box-shadow:var(--depth-3)}
    .card.status-good::after,.card.status-warning::after,.card.status-danger::after{content:"";position:absolute;left:0;top:0;bottom:0;width:5px}
    .card.status-good::after{background:linear-gradient(180deg,#41d98b,#2cb56f)}
    .card.status-warning::after{background:linear-gradient(180deg,#f7c052,#e99a10)}
    .card.status-danger::after{background:linear-gradient(180deg,#f07b72,#e0443a)}

    .card-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;padding-bottom:8px;border-bottom:1px solid rgba(52,152,219,.12)}
    .insurer-logo-header{width:48px;height:48px;border-radius:10px;background:#fff;display:flex;align-items:center;justify-content:center;border:1px solid rgba(52,152,219,.18);box-shadow:var(--depth-1);overflow:hidden;flex:0 0 48px}
    .insurer-logo-header img{width:100%;height:100%;object-fit:contain}
    .logo-placeholder{width:100%;height:100%;display:flex;align-items:center;justify-content:center;font-weight:800;font-size:12px;color:#95a5a6;background:#ecf0f1;border-radius:inherit}
    .header-right{display:flex;align-items:center;gap:10px}
    .insurance-type{display:inline-flex;align-items:center;gap:6px;padding:4px 8px;border-radius:999px;background:linear-gradient(180deg,rgba(52,152,219,.14),rgba(52,152,219,.06));border:1px solid rgba(52,152,219,.18);font-weight:800;font-size:14px;color:var(--primary-dark)}
    .insurance-icon{width:40px;height:40px;background:linear-gradient(180deg,var(--primary-light),var(--primary));border-radius:10px;display:flex;align-items:center;justify-content:center;color:#fff;box-shadow:0 6px 12px rgba(52,152,219,.3);border:1px solid rgba(255,255,255,.4)}
    .insurance-icon i{font-size:16px}
    .card-details{flex-grow:1}
    .detail-item{display:flex;justify-content:space-between;margin:8px 0}
    .detail-label{color:var(--text-light);font-size:13px}
    .detail-value{font-weight:700;color:var(--text-dark);font-size:14px}
    .contact-line{display:flex;align-items:center;justify-content:center;gap:6px;font-weight:700;color:#105b96;background:linear-gradient(180deg,#f7fbff,#eef6ff);border:1px solid rgba(52,152,219,.18);padding:6px 8px;border-radius:10px;margin:6px 0;box-shadow:var(--depth-1);line-height:1.2;font-size:12px}
    .contact-line i{font-size:12px;color:#2c80b9}
    .contact-line span:last-child{font-size:12px;font-weight:800}

    /* Anillo + acciones */
    .ring-row{display:flex;align-items:center;gap:12px;margin-top:6px}
    .status-container{display:flex;flex-direction:column;align-items:center}
    .status-ring{position:relative;width:80px;height:80px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:900;font-size:14px;background:conic-gradient(var(--ring-color,var(--success)) 0 var(--progress,100%),var(--ring-bg) var(--progress,100%) 100%);box-shadow:0 12px 22px rgba(0,0,0,.18),0 6px 10px rgba(0,0,0,.1)}
    .status-ring::before{content:"";position:absolute;inset:-2px;border-radius:50%;background:radial-gradient(circle at 30% 30%,rgba(255,255,255,.85),rgba(255,255,255,.25) 40%,rgba(255,255,255,0) 60%),conic-gradient(from -90deg,rgba(255,255,255,.25),rgba(0,0,0,.08),rgba(255,255,255,.25))}
    .status-ring::after{content:"";position:absolute;inset:7px;border-radius:50%;background:radial-gradient(circle at 35% 30%,#fff,#f5f8ff 60%,#e9eef7)}
    .status-ring-inner{position:relative;z-index:2;width:60px;height:60px;border-radius:50%;display:flex;align-items:center;justify-content:center;color:#2c3e50;text-shadow:0 1px 0 rgba(255,255,255,.7)}
    .days-text{font-size:11px;text-align:center;margin-top:6px;color:var(--text-light);font-weight:700}
    .status-ring-good{--ring-color:var(--success)}.status-ring-warning{--ring-color:var(--warning)}.status-ring-danger{--ring-color:var(--danger)}
    .ring-actions{display:flex;flex-direction:column;gap:8px;min-width:160px}
    .ring-actions .btn{width:100%;min-height:38px;padding:8px 12px}

    /* Footer / modales / formularios preexistentes */
    footer{text-align:center;margin-top:22px;padding:18px;color:#fff;background:linear-gradient(135deg,var(--primary),var(--primary-dark));border-radius:14px;box-shadow:var(--depth-2)}
    .modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,.45);z-index:9999;justify-content:center;align-items:center;backdrop-filter:blur(6px)}
    .modal-content{background:linear-gradient(180deg,rgba(255,255,255,.92),rgba(255,255,255,.98));border-radius:18px;width:96%;max-width:1400px;padding:28px;box-shadow:var(--depth-3);max-height:90vh;overflow:auto;position:relative;border:1px solid rgba(52,152,219,.15)}
    .modal-header{text-align:center;margin-bottom:14px;position:relative}
    .close-modal{position:absolute;top:-10px;right:-10px;width:34px;height:34px;background:var(--danger);color:#fff;border:none;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center}

    .form-grid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:12px}
    @media (max-width:720px){.form-grid{grid-template-columns:1fr}}
    .form-group{display:flex;flex-direction:column;gap:6px}
    .form-label{font-weight:800;color:#1f2d3d;font-size:14px;display:flex;align-items:center;gap:8px}
    .hint{font-size:12px;color:#567;font-weight:600}
    .input-wrap{display:flex;align-items:center;gap:10px;padding:12px 14px;border-radius:12px;background:linear-gradient(180deg,#ffffff,#f7faff);border:1px solid rgba(52,152,219,.18);box-shadow:var(--depth-1)}
    .input-wrap i{color:#2c80b9}
    .input-wrap input,.input-wrap select,.input-wrap textarea{width:100%;border:none;outline:none;background:transparent;font-size:15px;color:#1f2d3d}
    .input-wrap textarea{min-height:120px;resize:vertical}
    .section-card{background:linear-gradient(180deg,#ffffff,#f6f8ff);border:1px solid rgba(52,152,219,.15);border-radius:16px;padding:16px;box-shadow:var(--depth-1);margin-bottom:14px}
    .section-title{font-weight:900;color:#155a8f;margin-bottom:8px;display:flex;align-items:center;gap:8px}

    /* Tamaños modales login / póliza */
    #loginModal .modal-content{max-width:520px;width:96%;padding:22px}
    #policyModal .modal-content{max-width:960px;width:96%;padding:22px}

    /* Renovación */
    .renewal-layout{display:grid;grid-template-columns:1fr 1.25fr;gap:20px}
    @media(max-width:1180px){.renewal-layout{grid-template-columns:1fr}}
    .renewal-col{background:linear-gradient(180deg,#fff,#f9fbff);border:1px solid rgba(52,152,219,.12);border-radius:14px;box-shadow:var(--depth-1);padding:16px}
    .insurer-option{display:grid;grid-template-columns:48px 1fr auto;gap:12px;align-items:center;padding:12px;border:2px solid #ecf0f1;border-radius:12px;margin-bottom:10px;cursor:pointer;transition:transform .25s,border-color .25s,background-color .25s;background:#fff;box-shadow:var(--depth-1)}
    .insurer-option:hover{border-color:var(--primary);transform:translateX(6px)}
    .insurer-option.selected{border-color:var(--primary);background:rgba(52,152,219,.06)}
    .insurer-logo-small{width:44px;height:44px;display:flex;align-items:center;justify-content:center;border-radius:10px;background:#fff;border:1px solid rgba(52,152,219,.18);overflow:hidden}
    .insurer-logo-small img{width:100%;height:100%;object-fit:contain}
    .insurer-price{font-weight:900;color:var(--primary-dark);text-align:right;min-width:130px}
    @keyframes blink-green{0%,100%{box-shadow:0 0 0 2px rgba(46,204,113,.9),0 0 12px rgba(46,204,113,.35)}50%{box-shadow:0 0 0 2px rgba(46,204,113,.3),0 0 2px rgba(46,204,113,.1)}}
    .insurer-option.cheapest{border-color:#2ecc71!important;animation:blink-green 1.2s infinite}
    .compare-title{font-weight:800;color:#1f2d3d;margin-bottom:8px;display:flex;align-items:center;gap:8px}
    .compare-table{width:100%;border-collapse:separate;border-spacing:0;overflow:hidden;border-radius:12px;box-shadow:var(--depth-1)}
    .compare-table thead th{background:linear-gradient(180deg,#eef6ff,#e8f1ff);color:#1f2d3d;text-align:left;font-weight:800;padding:12px;border-bottom:1px solid rgba(52,152,219,.15)}
    .compare-table tbody td{background:#fff;padding:12px;border-bottom:1px solid #f0f3f7}
    .compare-table img{width:28px;height:28px;object-fit:contain}
    .pill{display:inline-block;padding:4px 10px;border-radius:999px;font-weight:700;font-size:12px;background:linear-gradient(180deg,#f7fbff,#eef6ff);border:1px solid rgba(52,152,219,.2);color:#2c3e50}
    .btn-mini{padding:8px 12px;border-radius:10px;font-weight:700;border:1px solid rgba(52,152,219,.2);background:#fff;box-shadow:var(--depth-1);cursor:pointer}
    .selected-row{box-shadow:inset 0 0 0 2px rgba(52,152,219,.35)}

    /* Pago/Success */
    #paymentModal .modal-content{max-width:720px}
    .pay-tabs{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:12px}
    .pay-tab{padding:10px 14px;border-radius:10px;border:1px solid rgba(52,152,219,.2);background:#fff;box-shadow:var(--depth-1);cursor:pointer;font-weight:700;display:flex;align-items:center;gap:8px}
    .pay-tab.active{background:linear-gradient(180deg,#f1f9ff,#e7f2ff);border-color:rgba(52,152,219,.45)}
    .inline-2{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    @media(max-width:560px){.inline-2{grid-template-columns:1fr}}

    #successModal .success-card{background:linear-gradient(180deg,#fff,#f6fffb);padding:30px;border-radius:18px;box-shadow:var(--depth-3);text-align:center;width:min(520px,92vw);border:1px solid rgba(46,204,113,.2)}
    .checkmark{width:100px;height:100px;border-radius:50%;margin:0 auto 16px;position:relative;background:radial-gradient(circle at 30% 30%,#8ef0be,#2ecc71);box-shadow:inset 0 8px 14px rgba(255,255,255,.6),inset 0 -8px 12px rgba(0,0,0,.08),0 12px 22px rgba(46,204,113,.35)}
    .checkmark svg{position:absolute;inset:0;margin:auto;width:64px;height:64px;filter:drop-shadow(0 2px 2px rgba(0,0,0,.15))}
    .checkmark .path{stroke:#fff;stroke-width:8;stroke-linecap:round;stroke-linejoin:round;fill:none;stroke-dasharray:100;stroke-dashoffset:100;animation:draw .7s .2s ease forwards}
    @keyframes draw{to{stroke-dashoffset:0}}
    @keyframes popScale{0%{transform:scale(.8);opacity:0}100%{transform:scale(1);opacity:1}}
    .checkmark{animation:popScale .5s ease-out both}

    /* Móvil */
    @media (max-width: 720px){
      header{padding-left:56px} /* para el botón de menú */
      .stats-bar{flex-direction:column;gap:14px}
      .stat-item:not(:last-child)::after{display:none}
      header{flex-direction:column;gap:12px;text-align:center}
      .user-actions{justify-content:center}
      .ring-row{align-items:stretch}
      #renewalModal .modal-content{
        width:100vw;height:100svh;max-height:100svh;border-radius:0;padding:16px;
        padding-left:calc(16px + env(safe-area-inset-left));
        padding-right:calc(16px + env(safe-area-inset-right));
        padding-bottom:calc(18px + env(safe-area-inset-bottom))
      }
      .renewal-layout{display:block}
      .renewal-col{box-shadow:none;border-radius:12px;margin-bottom:12px}
      .insurer-logo-small{width:40px;height:40px}
      .insurer-option{grid-template-columns:44px 1fr auto}
      .table-responsive{overflow-x:auto;-webkit-overflow-scrolling:touch}
      #confirmRenewal{position:sticky;bottom:0;z-index:2}
    }
  </style>
</head>
<body>
  <button class="sb-toggle" id="openSidebar"><i class="fas fa-bars"></i> Menú</button>

  <div class="app">
    <!-- ===== SIDEBAR ===== -->
    <aside class="sidebar" id="sidebar">
      <div class="sb-header">
        <div class="sb-logo"><img src="logos/insurahublogo.png" alt="InsuraHub" onerror="this.remove();this.parentNode.textContent='IH'"></div>
        <div>
          <div class="sb-title">InsuraHub</div>
          <small style="opacity:.85">Panel</small>
        </div>
      </div>

      <div class="sb-group">
        <div class="sb-item" id="btnSarlaft">
          <i class="fas fa-clipboard-check"></i> Tu formulario SARLAFT al día
          <span class="sb-status bad" id="sarlaftStatus">Pendiente</span>
        </div>
        <div class="sb-item" id="btnLoader">
          <i class="fas fa-cloud-upload-alt"></i> Tus pólizas (cargar)
        </div>
      </div>
    </aside>

    <!-- ===== CONTENIDO ===== -->
    <main class="content">
      <!-- Header -->
      <header>
        <div class="app-title">
          <div class="app-icon"><img src="logos/insurahublogo.png" alt="InsuraHub" onerror="this.remove();this.parentNode.textContent='IH'"></div>
          <div class="app-title-text"><h1>InsuraHub</h1><p>Gestión Inteligente de Seguros</p></div>
        </div>
        <div class="user-actions">
          <button class="btn" id="addPolicyBtn"><i class="fas fa-plus"></i> Nueva Póliza</button>
          <button class="btn btn-outline" id="loginBtn"><i class="fas fa-user"></i> Iniciar Sesión</button>
        </div>
      </header>

      <!-- Stats -->
      <div class="stats-bar">
        <div class="stat-item"><div class="stat-value" id="totalPolicies">6</div><div class="stat-label">Pólizas Activas</div></div>
        <div class="stat-item"><div class="stat-value" id="expiringPolicies">2</div><div class="stat-label">Por Vencer (&lt;30 días)</div></div>
        <div class="stat-item"><div class="stat-value" id="totalCoverage">$985.000.000</div><div class="stat-label">Cobertura Total</div></div>
      </div>

      <!-- Grid pólizas -->
      <div class="card-grid" id="policyGrid"></div>
    </main>
  </div>

  <!-- ===== Modales EXISTENTES (Login, Nueva Póliza, Renovación, Condiciones, Pago, Success) ===== -->
  <!-- (…todo tu bloque de modales y scripts originales permanece igual…)
       Nota: los modales originales están intactos; por brevedad no los repito aquí,
       pero se incluyen más abajo en ESTE MISMO archivo. -->

  <!-- ===== NUEVO: Modal SARLAFT ===== -->
  <div class="modal" id="sarlaftModal" aria-hidden="true">
    <div class="modal-content" role="dialog" aria-modal="true" style="max-width:980px">
      <div class="modal-header">
        <h2>Formulario SARLAFT</h2>
        <p style="color:#567;font-weight:600">Completa los datos para cumplir con prevención de LA/FT/FPADM</p>
        <button class="close-modal" id="closeSarlaft">×</button>
      </div>

      <form id="sarlaftForm">
        <!-- Identificación -->
        <div class="section-card">
          <div class="section-title"><i class="fas fa-id-card"></i> Identificación</div>
          <div class="form-grid">
            <div class="form-group">
              <label class="form-label"><i class="fas fa-user-check"></i> Tipo de persona</label>
              <div class="input-wrap">
                <select name="tipoPersona" required>
                  <option value="">Selecciona…</option>
                  <option>Natural</option>
                  <option>Jurídica</option>
                </select>
              </div>
            </div>
            <div class="form-group">
              <label class="form-label"><i class="fas fa-signature"></i> Nombre/Razón social</label>
              <div class="input-wrap"><input name="nombre" required placeholder="Nombre completo o razón social"></div>
            </div>
            <div class="form-group">
              <label class="form-label"><i class="fas fa-id-badge"></i> Tipo de documento</label>
              <div class="input-wrap">
                <select name="tipoDoc" required>
                  <option value="">Selecciona…</option>
                  <option>CC</option><option>CE</option><option>NIT</option><option>Pasaporte</option>
                </select>
              </div>
            </div>
            <div class="form-group">
              <label class="form-label"><i class="fas fa-hashtag"></i> Número de documento</label>
              <div class="input-wrap"><input name="numDoc" required inputmode="numeric" placeholder="Sin puntos ni comas"></div>
            </div>
            <div class="form-group">
              <label class="form-label"><i class="fas fa-calendar-day"></i> Fecha nac./constitución</label>
              <div class="input-wrap"><input type="date" name="fechaNac" required></div>
            </div>
            <div class="form-group">
              <label class="form-label"><i class="fas fa-flag"></i> Nacionalidad</label>
              <div class="input-wrap">
                <select name="nacionalidad" required>
                  <option value="">Selecciona…</option>
                  <option>Colombiana</option><option>Venezolana</option><option>Peruana</option><option>Otra</option>
                </select>
              </div>
            </div>
            <div class="form-group" style="grid-column:1/-1">
              <label class="form-label"><i class="fas fa-location-dot"></i> Dirección</label>
              <div class="input-wrap"><input name="direccion" required placeholder="Calle, número, ciudad, país"></div>
            </div>
          </div>
        </div>

        <!-- Actividad económica -->
        <div class="section-card">
          <div class="section-title"><i class="fas fa-briefcase"></i> Actividad económica</div>
          <div class="form-grid">
            <div class="form-group">
              <label class="form-label"><i class="fas fa-user-tie"></i> Ocupación/actividad</label>
              <div class="input-wrap">
                <select name="actividad" required>
                  <option value="">Selecciona…</option>
                  <option>Empleado</option><option>Independiente</option><option>Empresario</option>
                  <option>Pensionado</option><option>Estudiante</option><option>Desempleado</option><option>Otro</option>
                </select>
              </div>
            </div>
            <div class="form-group">
              <label class="form-label"><i class="fas fa-industry"></i> Sector</label>
              <div class="input-wrap">
                <select name="sector" required>
                  <option value="">Selecciona…</option>
                  <option>Comercio</option><option>Servicios</option><option>Industrial</option>
                  <option>Financiero</option><option>Agrícola</option><option>Minería</option>
                  <option>Construcción</option><option>Transporte</option><option>Salud</option><option>Tecnología</option><option>Otro</option>
                </select>
              </div>
            </div>
            <div class="form-group"><label class="form-label"><i class="fas fa-people-roof"></i> Empresa (si aplica)</label><div class="input-wrap"><input name="empresa" placeholder="Nombre empresa / NIT"></div></div>
            <div class="form-group"><label class="form-label"><i class="fas fa-user-tie"></i> Cargo (si aplica)</label><div class="input-wrap"><input name="cargo" placeholder="Cargo/rol"></div></div>
            <div class="form-group">
              <label class="form-label"><i class="fas fa-sack-dollar"></i> Ingresos mensuales</label>
              <div class="input-wrap">
                <select name="ingresos" required>
                  <option value="">Selecciona…</option>
                  <option>&lt; $2.000.000</option><option>$2–5 MM</option><option>$5–10 MM</option>
                  <option>$10–20 MM</option><option>$20–50 MM</option><option>&gt; $50 MM</option>
                </select>
              </div>
            </div>
            <div class="form-group">
              <label class="form-label"><i class="fas fa-vault"></i> Activos</label>
              <div class="input-wrap">
                <select name="activos" required>
                  <option value="">Selecciona…</option>
                  <option>&lt; $50 MM</option><option>$50–200 MM</option><option>$200–500 MM</option><option>&gt; $500 MM</option>
                </select>
              </div>
            </div>
            <div class="form-group">
              <label class="form-label"><i class="fas fa-scale-balanced"></i> Pasivos</label>
              <div class="input-wrap">
                <select name="pasivos" required>
                  <option value="">Selecciona…</option>
                  <option>0</option><option>&lt; $50 MM</option><option>$50–200 MM</option><option>&gt; $200 MM</option>
                </select>
              </div>
            </div>
          </div>
        </div>

        <!-- Origen de fondos -->
        <div class="section-card">
          <div class="section-title"><i class="fas fa-coins"></i> Origen de fondos</div>
          <div class="form-grid">
            <div class="form-group">
              <label class="form-label"><i class="fas fa-hand-holding-dollar"></i> Principal origen</label>
              <div class="input-wrap">
                <select name="origen" required>
                  <option value="">Selecciona…</option>
                  <option>Salario</option><option>Honorarios</option><option>Ventas</option><option>Rendimientos</option>
                  <option>Herencia</option><option>Aportes</option><option>Donaciones</option><option>Ahorros</option><option>Venta de activos</option><option>Otro</option>
                </select>
              </div>
            </div>
            <div class="form-group"><label class="form-label"><i class="fas fa-earth-americas"></i> País de origen de fondos</label><div class="input-wrap"><input name="paisFondos" required placeholder="Ej: Colombia"></div></div>
            <div class="form-group" style="grid-column:1/-1"><label class="form-label"><i class="fas fa-file-pen"></i> Describa el origen (si seleccionó 'Otro')</label><div class="input-wrap"><textarea name="detalleOrigen" placeholder="Detalle del origen de fondos cuando aplique"></textarea></div></div>
          </div>
        </div>

        <!-- PEP / FATCA / Riesgos -->
        <div class="section-card">
          <div class="section-title"><i class="fas fa-shield-halved"></i> Declaraciones</div>
          <div class="form-grid">
            <div class="form-group"><label class="form-label"><i class="fas fa-gavel"></i> ¿Maneja recursos públicos?</label><div class="input-wrap"><select name="recPublicos" required><option value="">Selecciona…</option><option>No</option><option>Sí</option></select></div></div>
            <div class="form-group"><label class="form-label"><i class="fas fa-user-tie"></i> ¿Es PEP?</label><div class="input-wrap"><select name="pep" required><option value="">Selecciona…</option><option>No</option><option>Sí</option></select></div></div>
            <div class="form-group" style="grid-column:1/-1"><label class="form-label"><i class="fas fa-circle-info"></i> Detalles PEP (si aplica)</label><div class="input-wrap"><input name="pepDetalle" placeholder="Cargo/entidad/relación"></div></div>
            <div class="form-group"><label class="form-label"><i class="fas fa-globe"></i> ¿Residente fiscal en otro país?</label><div class="input-wrap"><select name="fatca" required><option value="">Selecciona…</option><option>No</option><option>Sí</option></select></div></div>
            <div class="form-group"><label class="form-label"><i class="fas fa-flag-usa"></i> País/TIN (si aplica)</label><div class="input-wrap"><input name="fatcaPaisTin" placeholder="País y TIN/Tax ID"></div></div>
            <div class="form-group"><label class="form-label"><i class="fas fa-hand-holding-usd"></i> ¿Opera frecuentemente en efectivo?</label><div class="input-wrap"><select name="efectivo" required><option value="">Selecciona…</option><option>No</option><option>Sí</option></select></div></div>
            <div class="form-group"><label class="form-label"><i class="fas fa-paper-plane"></i> ¿Giros internacionales?</label><div class="input-wrap"><select name="giros" required><option value="">Selecciona…</option><option>No</option><option>Sí</option></select></div></div>
            <div class="form-group"><label class="form-label"><i class="fas fa-bitcoin-sign"></i> ¿Usa criptoactivos?</label><div class="input-wrap"><select name="cripto" required><option value="">Selecciona…</option><option>No</option><option>Sí</option></select></div></div>
          </div>
        </div>

        <div class="section-card">
          <label class="form-label"><input type="checkbox" id="aceptoSarlaft" required> Declaro que la información es veraz y autorizo su verificación.</label>
        </div>

        <button class="btn" type="submit" style="width:100%"><i class="fas fa-floppy-disk"></i> Guardar SARLAFT</button>
      </form>
    </div>
  </div>

  <!-- ===== NUEVO: Modal CARGA DE PÓLIZAS ===== -->
  <div class="modal" id="loaderModal" aria-hidden="true">
    <div class="modal-content" role="dialog" aria-modal="true" style="max-width:860px">
      <div class="modal-header">
        <h2>Cargar pólizas</h2>
        <p style="color:#567;font-weight:600">Sube un archivo o pega datos en JSON/CSV. Se añadirán a tu panel.</p>
        <button class="close-modal" id="closeLoader">×</button>
      </div>

      <div class="section-card">
        <div class="section-title"><i class="fas fa-file-arrow-up"></i> Archivo</div>
        <div class="form-grid">
          <div class="form-group" style="grid-column:1/-1">
            <div class="input-wrap"><i class="fas fa-upload"></i><input type="file" id="fileInput" accept=".json,.csv,.txt"></div>
            <div class="hint">Formatos soportados: .json (lista de objetos) o .csv con encabezados.</div>
          </div>
        </div>
      </div>

      <div class="section-card">
        <div class="section-title"><i class="fas fa-clipboard-list"></i> Pegar datos (JSON o CSV)</div>
        <div class="form-group">
          <div class="input-wrap"><textarea id="pasteArea" placeholder='JSON ejemplo:
[
  {"type":"auto","typeName":"Seguro de Auto","insurer":"allianz","policyNumber":"#AUTO-123","expirationDate":"2026-01-01","insuredId":"111","insuredName":"Juan","coverage":200000000,"conditions":"Texto"},
  {"type":"home","typeName":"Seguro de Hogar","insurer":"axa","policyNumber":"#HOME-456","expirationDate":"2026-02-01","insuredId":"222","insuredName":"María","coverage":300000000,"conditions":"Texto"}
]

CSV ejemplo:
type,typeName,insurer,policyNumber,expirationDate,insuredId,insuredName,coverage,conditions
auto,Seguro de Auto,allianz,#AUTO-123,2026-01-01,111,Juan,200000000,Texto
home,Seguro de Hogar,axa,#HOME-456,2026-02-01,222,María,300000000,Texto
'></textarea></div>
        </div>
        <button class="btn" id="processInput" style="width:100%"><i class="fas fa-check"></i> Procesar</button>
      </div>
    </div>
  </div>

  <!-- ===== Modales originales (Login, Nueva Póliza, Renovación, Condiciones, Pago, Success) ===== -->
  <!-- (Pego aquí íntegros tus modales y scripts anteriores, SIN CAMBIOS en funcionalidad) -->

  <!-- Login -->
  <div class="modal" id="loginModal" aria-hidden="true">
    <div class="modal-content" role="dialog" aria-modal="true">
      <div class="modal-header">
        <h2>Iniciar Sesión</h2>
        <p>Accede a tu cuenta para gestionar tus seguros</p>
        <button class="close-modal" id="closeLoginModal">×</button>
      </div>
      <div class="social-login">
        <button type="button" class="btn-social btn-google" id="loginGoogle"><i class="fab fa-google"></i> Continuar con Google</button>
        <button type="button" class="btn-social btn-facebook" id="loginFacebook"><i class="fab fa-facebook-f"></i> Continuar con Facebook</button>
        <button type="button" class="btn-social btn-apple" id="loginApple"><i class="fab fa-apple"></i> Continuar con Apple</button>
      </div>
      <div style="text-align:center;color:#99a3ad;font-weight:700;margin:8px 0 14px">o con tu correo</div>
      <form>
        <div class="form-group"><label class="form-label" for="email"><i class="fas fa-envelope"></i> Correo Electrónico</label><div class="input-wrap"><input type="email" id="email" required placeholder="tucorreo@dominio.com"></div></div>
        <div class="form-group"><label class="form-label" for="password"><i class="fas fa-lock"></i> Contraseña</label><div class="input-wrap"><input type="password" id="password" required placeholder="••••••••"></div></div>
        <button type="submit" class="btn" style="width:100%"><i class="fas fa-right-to-bracket"></i> Iniciar Sesión</button>
      </form>
    </div>
  </div>

  <!-- Nueva Póliza -->
  <div class="modal" id="policyModal" aria-hidden="true">
    <div class="modal-content" role="dialog" aria-modal="true">
      <div class="modal-header">
        <h2>Registrar Nueva Póliza</h2>
        <p>Completa la información de la póliza</p>
        <button class="close-modal" id="closePolicyModal">×</button>
      </div>

      <form id="policyForm">
        <div class="section-card">
          <div class="section-title"><i class="fas fa-id-card"></i> Datos del asegurado</div>
          <div class="form-grid">
            <div class="form-group"><label class="form-label" for="insuredId"><i class="fas fa-hashtag"></i> Identificación</label><div class="input-wrap"><input type="text" id="insuredId" required placeholder="Ej: 1234567890"></div><div class="hint">Cédula o NIT del titular</div></div>
            <div class="form-group"><label class="form-label" for="insuredName"><i class="fas fa-user"></i> Nombre y Apellidos</label><div class="input-wrap"><input type
